# gRPC Metadata

## Introduction

Metadata in gRPC acts as a side channel, enabling clients and servers to exchange supplementary information associated with a Remote Procedure Call (RPC).

gRPC metadata consists of key-value pairs transmitted with initial or final gRPC requests and responses. This data provides contextual details about the call, such as authentication credentials, tracing information, or custom headers.

gRPC metadata leverages HTTP/2 headers for implementation. Keys are ASCII strings, and values can be either ASCII strings or binary data. Keys are case-insensitive and must not begin with the `grpc-` prefix, which is reserved for gRPC's internal use.

Both clients and servers can send and receive gRPC metadata. Headers are sent from the client to the server before the initial request and from the server to the client before the initial response. Trailers, on the other hand, are sent by the server upon closing an RPC.

## Uses of gRPC Metadata

gRPC metadata serves various purposes, including:

* **Authentication:** Sending authentication credentials (e.g., OAuth2, JWT via the `Authorization` header) to the server.
* **Tracing:** Transmitting tracing information to track request progress within a distributed system.
* **Custom Headers:** Implementing application-specific features like load balancing, rate limiting, or detailed error messages.
* **Internal Usages:** gRPC internally utilizes HTTP/2 headers and trailers, seamlessly integrating with application-defined metadata.

## Be Aware

**WARNING:** Servers may impose limits on the size of `Request-Headers`, with a recommended default of 8 KiB. Custom metadata must adhere to the "Custom-Metadata" format specified in [PROTOCOL-HTTP2](https://http2.github.io/http2-spec/#rfc.section.8.1.2), except for binary headers, which do not require base64 encoding.

## Headers

Headers are transmitted before the initial request data message from the client to the server and before the initial response data from the server to the client. They convey information such as authentication credentials and RPC handling instructions. Some headers, like `authorization`, are automatically generated by gRPC.

Custom header handling is language-dependent, typically facilitated through interceptors.

## Trailers

Trailers are a specialized type of header sent after the message data. They communicate the outcome of an RPC internally. At the application level, custom trailers can convey information not directly part of the data, such as server utilization and query costs. Trailers are sent exclusively by the server.
